pipeline{
         agent any
            environment{
                         
                         def mvnHOME = tool name: 'maven-3.3.3', type: 'maven'
                         def mvnCMD = "${mvnHOME}/bin/mvn"
                       }
                
          stages{
                stage("git checkout")
                 {
                   steps{
                         git credentialsId: 'github', url: 'https://github.com/lakshmikar23/CI-CD-MavenGit.git'                       }
                       }
 
           stage("maven build")
                   {
                    steps{
                         
                         sh "${mvnCMD} clean package"
                         sh "mv target/*.war target/myweb.war"
                         
                         }
                    }
                    stage("deploy")
                   {
                     steps{
                     
                           sshPublisher(publishers: [sshPublisherDesc(configName: 'tomcat server', transfers: [sshTransfer(cleanRemote: false, excludes: '', execCommand: '', execTimeout: 120000, flatten: false, makeEmptyDirs: false, noDefaultExcludes: false, patternSeparator: '[, ]+', remoteDirectory: '/tomcat/webapps', remoteDirectorySDF: false, removePrefix: 'target', sourceFiles: '**/*.war')], usePromotionTimestamp: false, useWorkspaceInPromotion: false, verbose: false)])                    
                     
                            }
                         }
                     stage("email notification")
                        {
                           steps{
                                 mail bcc: '', body: '''welcome to jenkins pipeline email alerts
    Thanks
 lakshmikar m''', cc: '', from: '', replyTo: '', subject: 'jenkins declarative pipeline report', to: 'm.lakshmikar23@gmail.com'
                         
                              }
                        }      
    
                    
               }
           }    
   
